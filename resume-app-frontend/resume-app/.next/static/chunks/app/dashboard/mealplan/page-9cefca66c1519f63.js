(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[531],{614:function(e,a,t){Promise.resolve().then(t.t.bind(t,72972,23)),Promise.resolve().then(t.bind(t,69462)),Promise.resolve().then(t.bind(t,70488)),Promise.resolve().then(t.bind(t,96246)),Promise.resolve().then(t.bind(t,32060)),Promise.resolve().then(t.bind(t,76257)),Promise.resolve().then(t.bind(t,12606))},76257:function(e,a,t){"use strict";t.d(a,{ErrorBoundary:function(){return s}});var r=t(2265);class s extends r.Component{static getDerivedStateFromError(){return{hasError:!0}}render(){return this.state.hasError?this.props.fallback:this.props.children}constructor(...e){super(...e),this.state={hasError:!1}}}},12606:function(e,a,t){"use strict";t.d(a,{default:function(){return M}});var r=t(57437),s=t(2265),n=t(28951),i=t(40875),l=t(22135),c=t(30401),o=t(93448);let d=n.fC,f=n.ZA,m=n.B4,u=s.forwardRef((e,a)=>{let{className:t,children:s,...l}=e;return(0,r.jsxs)(n.xz,{ref:a,className:(0,o.cn)("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",t),...l,children:[s,(0,r.jsx)(n.JO,{asChild:!0,children:(0,r.jsx)(i.Z,{className:"h-4 w-4 opacity-50"})})]})});u.displayName=n.xz.displayName;let p=s.forwardRef((e,a)=>{let{className:t,...s}=e;return(0,r.jsx)(n.u_,{ref:a,className:(0,o.cn)("flex cursor-default items-center justify-center py-1",t),...s,children:(0,r.jsx)(l.Z,{className:"h-4 w-4"})})});p.displayName=n.u_.displayName;let x=s.forwardRef((e,a)=>{let{className:t,...s}=e;return(0,r.jsx)(n.$G,{ref:a,className:(0,o.cn)("flex cursor-default items-center justify-center py-1",t),...s,children:(0,r.jsx)(i.Z,{className:"h-4 w-4"})})});x.displayName=n.$G.displayName;let h=s.forwardRef((e,a)=>{let{className:t,children:s,position:i="popper",...l}=e;return(0,r.jsx)(n.h_,{children:(0,r.jsxs)(n.VY,{ref:a,className:(0,o.cn)("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","popper"===i&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",t),position:i,...l,children:[(0,r.jsx)(p,{}),(0,r.jsx)(n.l_,{className:(0,o.cn)("p-1","popper"===i&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:s}),(0,r.jsx)(x,{})]})})});h.displayName=n.VY.displayName;let y=s.forwardRef((e,a)=>{let{className:t,...s}=e;return(0,r.jsx)(n.__,{ref:a,className:(0,o.cn)("py-1.5 pl-8 pr-2 text-sm font-semibold",t),...s})});y.displayName=n.__.displayName;let g=s.forwardRef((e,a)=>{let{className:t,children:s,...i}=e;return(0,r.jsxs)(n.ck,{ref:a,className:(0,o.cn)("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),...i,children:[(0,r.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,r.jsx)(n.wU,{children:(0,r.jsx)(c.Z,{className:"h-4 w-4"})})}),(0,r.jsx)(n.eT,{children:s})]})});g.displayName=n.ck.displayName,s.forwardRef((e,a)=>{let{className:t,...s}=e;return(0,r.jsx)(n.Z0,{ref:a,className:(0,o.cn)("-mx-1 my-1 h-px bg-muted",t),...s})}).displayName=n.Z0.displayName;var j=t(12381),N=t(58293),b=t(51817),v=t(82431);let w=t(40257).env.NEXT_PUBLIC_API_URL||"http://localhost:8000/api";async function _(e){let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};try{let t=await fetch("".concat(w).concat(e),{...a,headers:{"Content-Type":"application/json",...a.headers}});if(!t.ok)throw Error("HTTP error! status: ".concat(t.status));return t.json()}catch(a){throw console.error("Error fetching ".concat(e,":"),a),a}}async function E(){try{let e=await fetch("".concat(w,"/meal-plan"),{headers:{"Content-Type":"application/json"},next:{revalidate:0}});if(!e.ok)throw Error("HTTP error! status: ".concat(e.status));return await e.json()}catch(e){throw console.error("Error fetching meal plan:",e),e}}async function C(){return _("/preferences")}async function R(e){return _("/preferences",{method:"PUT",body:JSON.stringify(e)})}var k=t(79820),Z=t(20271);let O=Z.fC,P=s.forwardRef((e,a)=>{let{className:t,...s}=e;return(0,r.jsx)(Z.aV,{ref:a,className:(0,o.cn)("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",t),...s})});P.displayName=Z.aV.displayName;let z=s.forwardRef((e,a)=>{let{className:t,...s}=e;return(0,r.jsx)(Z.xz,{ref:a,className:(0,o.cn)("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",t),...s})});z.displayName=Z.xz.displayName;let G=s.forwardRef((e,a)=>{let{className:t,...s}=e;return(0,r.jsx)(Z.VY,{ref:a,className:(0,o.cn)("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",t),...s})});G.displayName=Z.VY.displayName;var T=t(84502),D=t(28870),V=t(69174),Y=t(26298);function S(e){let{mealPlan:a}=e,t=Object.keys(a.meal_plan),n=(0,s.useMemo)(()=>{let e={};return Object.values(a.meal_plan).forEach(a=>{Object.values(a).forEach(a=>{"string"!=typeof a&&a&&(e[a.name]={...a})})}),e},[a]),i=(()=>{let e={calories:0,protein:0,carbs:0,fat:0,daysWithData:0};return Object.values(a.meal_plan).forEach(a=>{let t=!1,r={calories:0,protein:0,carbs:0,fat:0};Object.values(a).forEach(e=>{"string"!=typeof e&&e&&(t=!0,r.calories+=e.calories,r.protein+=e.protein_g,r.carbs+=e.carbs_g,r.fat+=e.fat_g)}),t&&(e.calories+=r.calories,e.protein+=r.protein,e.carbs+=r.carbs,e.fat+=r.fat,e.daysWithData+=1)}),{calories:Math.round(e.calories/e.daysWithData),protein:Math.round(e.protein/e.daysWithData),carbs:Math.round(e.carbs/e.daysWithData),fat:Math.round(e.fat/e.daysWithData)}})();return(0,r.jsxs)("div",{className:"space-y-8",children:[(0,r.jsx)("div",{className:"grid gap-4 md:grid-cols-4",children:Object.entries(i).map(e=>{let[a,t]=e;return(0,r.jsx)(k.Zb,{children:(0,r.jsx)(k.aY,{className:"pt-6",children:(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("p",{className:"text-sm font-medium text-muted-foreground capitalize",children:a}),(0,r.jsxs)("p",{className:"text-3xl font-bold mt-2",children:[t,"calories"===a?"":"g"]})]})})},a)})}),(0,r.jsxs)(O,{defaultValue:t[0],className:"space-y-6",children:[(0,r.jsx)(P,{className:"inline-flex h-auto p-1 bg-muted rounded-lg",children:t.map(e=>(0,r.jsx)(z,{value:e,className:"inline-flex items-center justify-center whitespace-nowrap px-6 py-3",children:e},e))}),t.map(e=>(0,r.jsx)(G,{value:e,className:"space-y-6",children:(0,r.jsx)(Y.E.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:10},transition:{duration:.3},className:"grid gap-6 md:grid-cols-3",children:Object.entries(a.meal_plan[e]).map(e=>{let[a,t]=e;return(0,r.jsx)(W,{meal:t,mealType:a,originalRecipe:"string"!=typeof t?n[t.name]:void 0},a)})})},e))]})]})}let W=e=>{let{meal:a,mealType:t,originalRecipe:s}=e;if("string"==typeof a)return(0,r.jsx)(Y.E.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.5},children:(0,r.jsx)(k.Zb,{className:"h-full",children:(0,r.jsx)(k.aY,{className:"flex h-full items-center justify-center p-6",children:(0,r.jsx)("p",{className:"text-muted-foreground",children:a})})})});let n=s&&a.calories===2*s.calories;return(0,r.jsx)(Y.E.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{duration:.5,ease:"easeOut"},children:(0,r.jsxs)(k.Zb,{className:"h-full",children:[(0,r.jsx)(k.Ol,{className:"pb-2",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsx)(k.ll,{className:"text-lg capitalize",children:t}),n&&(0,r.jsxs)(V.C,{variant:"secondary",className:"ml-2",children:[(0,r.jsx)(T.Z,{className:"mr-1 h-4 w-4"}),"Double Portion"]})]})}),(0,r.jsxs)(k.aY,{className:"pb-2 py-5",children:[(0,r.jsx)("h3",{className:"font-medium",children:a.name}),(0,r.jsx)("div",{className:"mt-2 flex items-center gap-4 text-sm text-muted-foreground",children:(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)(D.Z,{className:"mr-1 h-4 w-4"}),a.diet]})}),(0,r.jsxs)("div",{className:"mt-2 grid grid-cols-2 gap-2 text-sm",children:[(0,r.jsxs)("div",{children:["Calories: ",a.calories]}),(0,r.jsxs)("div",{children:["Protein: ",a.protein_g,"g"]}),(0,r.jsxs)("div",{children:["Carbs: ",a.carbs_g,"g"]}),(0,r.jsxs)("div",{children:["Fat: ",a.fat_g,"g"]})]})]})]})})};function M(e){let{initialMealPlan:a}=e,[t,n]=(0,s.useState)(a),[i,l]=(0,s.useState)(null),[c,o]=(0,s.useState)(!1),[p,x]=(0,s.useState)(!1);(0,s.useEffect)(()=>{(async()=>{try{let e=await C();l(e)}catch(e){console.error("Error fetching preferences:",e)}})()},[]);let w=async e=>{if(i){x(!0);try{await R({name:i.name,dietaryGoal:e,nutritionalGoals:i.nutritionalGoals}),l(a=>a?{...a,dietaryGoal:e}:null),await _()}catch(e){console.error("Error saving preferences:",e)}finally{x(!1)}}},_=async()=>{o(!0);try{let e=await E();n(e)}catch(e){console.error("Error refreshing meal plan:",e)}finally{o(!1)}},Z=c||p;return i?(0,r.jsxs)("div",{className:"space-y-8",children:[(0,r.jsxs)("div",{className:"flex flex-col space-y-4 lg:flex-row lg:items-center lg:justify-between",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,r.jsx)(N.Z,{className:"h-6 w-6 text-muted-foreground"}),(0,r.jsxs)(d,{value:i.dietaryGoal,onValueChange:e=>w(e),disabled:Z,children:[(0,r.jsx)(u,{className:"w-[180px]",children:(0,r.jsx)(m,{placeholder:"Select diet"})}),(0,r.jsx)(h,{children:(0,r.jsxs)(f,{children:[(0,r.jsx)(y,{children:"Diet Types"}),["Vegetarian","Vegan","Keto","Mediterranean","Low-carb","Bulking","Cutting"].map(e=>(0,r.jsx)(g,{value:e,className:"capitalize",children:e.replace("-"," ")},e))]})})]}),p&&(0,r.jsxs)("div",{className:"text-sm text-muted-foreground flex items-center space-x-2",children:[(0,r.jsx)(b.Z,{className:"h-4 w-4 animate-spin"}),(0,r.jsx)("span",{children:"Updating preferences..."})]})]}),(0,r.jsxs)(j.z,{variant:"outline",onClick:_,disabled:Z,className:"w-full lg:w-auto",children:[(0,r.jsx)(v.Z,{className:"mr-2 h-4 w-4 ".concat(c?"animate-spin":"")}),c?"Refreshing...":"Refresh Plan"]})]}),(0,r.jsxs)("div",{className:"grid gap-6 md:grid-cols-2 lg:grid-cols-3",children:[(0,r.jsx)(k.Zb,{className:"md:col-span-1",children:(0,r.jsxs)(Y.E.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},transition:{duration:.3},children:[(0,r.jsx)(k.Ol,{children:(0,r.jsx)(k.ll,{className:"text-lg font-medium",children:"Nutritional Goals"})}),(0,r.jsx)(k.aY,{children:(0,r.jsx)("div",{className:"space-y-4",children:Object.entries(i.nutritionalGoals).map(e=>{let[a,t]=e;return(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsx)("span",{className:"text-sm font-medium capitalize text-muted-foreground",children:a}),(0,r.jsxs)("span",{className:"font-bold",children:[t,"calories"===a?" kcal":"g"]})]},a)})})})]})}),(0,r.jsx)(k.Zb,{className:"md:col-span-1 lg:col-span-2",children:(0,r.jsxs)(Y.E.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},transition:{duration:.3},children:[(0,r.jsx)(k.Ol,{children:(0,r.jsx)(k.ll,{className:"text-lg font-medium",children:"Diet Overview"})}),(0,r.jsx)(k.aY,{children:(0,r.jsx)("div",{className:"text-lg",children:(0,r.jsxs)("p",{className:"text-muted-foreground",children:["Your meal plan is optimized for a ",i.dietaryGoal," diet, with a daily target of ",i.nutritionalGoals.calories," calories and ",i.nutritionalGoals.protein,"g of protein."]})})})]})})]}),(0,r.jsx)("div",{className:"rounded-lg border bg-card",children:(0,r.jsx)("div",{className:"p-6",children:(0,r.jsx)(S,{mealPlan:t})})})]}):null}},69174:function(e,a,t){"use strict";t.d(a,{C:function(){return l}});var r=t(57437);t(2265);var s=t(77712),n=t(93448);let i=(0,s.j)("inline-flex items-center rounded-md border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground shadow hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground shadow hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function l(e){let{className:a,variant:t,...s}=e;return(0,r.jsx)("div",{className:(0,n.cn)(i({variant:t}),a),...s})}},79820:function(e,a,t){"use strict";t.d(a,{Ol:function(){return l},SZ:function(){return o},Zb:function(){return i},aY:function(){return d},eW:function(){return f},ll:function(){return c}});var r=t(57437),s=t(2265),n=t(93448);let i=s.forwardRef((e,a)=>{let{className:t,...s}=e;return(0,r.jsx)("div",{ref:a,className:(0,n.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",t),...s})});i.displayName="Card";let l=s.forwardRef((e,a)=>{let{className:t,...s}=e;return(0,r.jsx)("div",{ref:a,className:(0,n.cn)("flex flex-col space-y-1.5 p-6",t),...s})});l.displayName="CardHeader";let c=s.forwardRef((e,a)=>{let{className:t,...s}=e;return(0,r.jsx)("h3",{ref:a,className:(0,n.cn)("text-2xl font-semibold leading-none tracking-tight",t),...s})});c.displayName="CardTitle";let o=s.forwardRef((e,a)=>{let{className:t,...s}=e;return(0,r.jsx)("p",{ref:a,className:(0,n.cn)("text-sm text-muted-foreground",t),...s})});o.displayName="CardDescription";let d=s.forwardRef((e,a)=>{let{className:t,...s}=e;return(0,r.jsx)("div",{ref:a,className:(0,n.cn)("p-6 pt-0",t),...s})});d.displayName="CardContent";let f=s.forwardRef((e,a)=>{let{className:t,...s}=e;return(0,r.jsx)("div",{ref:a,className:(0,n.cn)("flex items-center p-6 pt-0",t),...s})});f.displayName="CardFooter"}},function(e){e.O(0,[130,193,27,465,605,878,649,298,770,539,971,117,744],function(){return e(e.s=614)}),_N_E=e.O()}]);